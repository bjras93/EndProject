@model LifeStruct.Models.DietModel

@{
    ViewBag.Title = "Create your own diet";
    var user = LifeStruct.Models.UserViewModel.GetCurrentUser();
}


<div ng-app="LifeStruct">

    <div class="create-diet" ng-controller="dietPostCtrl">
        <div class="diet">

            @using (Html.BeginForm("Create", "Diets", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <input type="hidden" id="UserId" name="UserId" value="@user.Id.Replace("-", "")" />
                <div class="information">
                    <input name="Title" class="ipt" type="text" placeholder="Title" />
                    <div ng-if="!myForm.Title.$valid && isClicked">
                        <div>This field is required</div>
                    </div>
                    <textarea name="Description" placeholder="Description" class="ipt tinymce"></textarea>
                    <div ng-if="!myForm.Description.$valid && isClicked">
                        <div>This field is required</div>
                    </div>
                    <div>
                        <tags-input ng-model="tags" placeholder="Tags to find your diet"></tags-input>
                        <input type="hidden" name="Tags" value="{{tags}}" />
                    </div>
                    <input type="submit" class="btn ib blogin" value="Next" />
                </div>

                <div class="picture">
                    <label class="btn ib" for="upload-file">Upload image</label>
                    <input ng-model="Img" type="file" accept="image/.png,.jpg,.gif" class="hide" id="upload-file" name="uploadFile" />
                    <img src="" id="modelImg" />
                </div>
                <div class="clear"></div>
            }
        </div>
    </div>
</div>
<script src="~/Content/JS/layout/diet.js"></script>
<script src="~/Content/JS/layout/fileupload.js"></script>
<script>
    upload('#upload-file', '#modelImg');
    diet.pageOne();
</script>